---
title: "Open Day with Mathematics"
institute: "University of Dundee"
format: revealjs
---

```{r}
#| echo: false
#| output: false
library(shinylive)
library(tidyverse)
library(fontawesome)
library(ggimage)
```

## What is _Statistics_? {.mySegue .center}

Statistics is the science of understanding **uncertainty** and **natural variation**.

::: columns
::: {.column width="50%"}
![](images/statistics-review.jpg){width="100%" alt="Chalkboard with the word Statistics and all of statistics."}
:::

::: {.column width="50%"}
> Statistics is a collection of procedures and principles for gaining and analyzing information to educate people and help them make better decisions when faced with uncertainty. (Utts, 2014)
:::
:::

## Statistical inference

- Often we are interested in estimating a characteristic of a population based on a small number of samples. 
- When we estimate a population characteristic using an inferential procedure, we can sometimes make errors!

::: {layout="[[100]]"}
```{mermaid}
%%| label: fig-flowchart
%%| fig-cap: We use data and (statistical) models to make inferences about a population. 
%%| fig-align: center
%%{init: {'theme': 'base', 'themeVariables': { 'fontSize': '28px'}}}%%

flowchart LR
  A(("Data")) & B(("Models")) --> C(("Inference")) ==> D(("Population"))
```
:::

## Bias and Variation

- **Error** is the difference between the true value of a quantity and the observed or recorded value.
- Sources of error can be described as systematic (**bias**) or random (due to chance **variation**).
- Variation is related to imprecision and bias is related to inaccuracy.

:::{.callout-caution}
## Pedagogical note

Students often find it difficult to distinguish between bias and variation *in practice*. 
:::

## How do we support students in learning the distinction between bias and variation in Mathematics at Dundee? {.center}

With experiential learning activities of course!

## Age Guessing: group task (10 min)

-   Ten cards display a photo of a person unknown to you. These cards will be passed around from group to group.
-   For each card:
    -   Estimate the age of the person in the photo in whole years; your group must come up with a single estimate.
    -   Record your estimate in the table provided.
-   Please select one person to report your groupâ€™s estimates.

##  Discussion {.center}
What were your estimation strategies?

## The big reveal[^*]

```{r}
#| echo: false

dat <- read_csv("data/age_true.csv")
dat$card <- factor(dat$card)
dat <- dat |> mutate(image = paste0("data/cards/", card, ".jpg"))

dat |> 
  ggplot(aes(x = true_age, y = position)) + 
  geom_segment(aes(x = true_age, xend = true_age, y = position, yend = rep(-0.8, 10))) +
  geom_image(aes(image = image), size = .2, 
             position = position_jitter(width = 0.0, height = 0.1, seed = 1)) + 
  labs(x = "True Age (years)") +
  scale_x_continuous(limits = c(8,87), breaks = c(8, 28, 34, 36, 39, 56, 60, 72, 87)) +
  scale_y_continuous(limits = c(-0.8,0.6), expand = c(0,0)) +
  theme_classic() + theme(axis.line.y=element_blank(),
                          axis.text.y=element_blank(),
                          axis.ticks.y=element_blank(),
                          axis.title.y=element_blank(),
                          axis.text = element_text(size = 14),
                          axis.title.x = element_text(size = 20))
```

[^*]: Data from UTKFace dataset <https://susanqq.github.io/UTKFace/>.

## Your estimates

```{shinylive-r}
#| standalone: true
#| viewerHeight: 500

library(shiny)
library(shinyMatrix)
library(bslib)
library(tibble)
library(tidyr)
library(readr)
library(dplyr, warn.conflicts = FALSE)
library(ggplot2)

# Define UI for random distribution app ----
# Sidebar layout with input and output definitions ----

m <- matrix(rep(NA, 60), 6, 10, dimnames = list(c(LETTERS[1:6]), sprintf("%s", seq(1:10))))

ui <- page_sidebar(
  sidebar = sidebar(
    title = "Estimated age (est_age) for each card by group",
    matrixInput("mat",
                value = m,
                inputClass = "numeric",
                rows = list(names = TRUE, extend = FALSE), 
                cols = list(names = TRUE, extend = FALSE)),
    fill = TRUE,
    fillable = TRUE,
    width = 600
  ),
  fillable = TRUE,
  fillable_mobile = TRUE,
  # Main panel for displaying outputs ----
  # Output: A tabset that combines three panels ----
  navset_card_underline(
    nav_panel("Data", tableOutput("data")),
    nav_panel("Variation", tableOutput("variation")),
    nav_panel("Bias", plotOutput("bias"))
  )
)


# Define server logic ----
server <- function(input, output, session) {
  rv <- reactiveValues(truthmat = t(matrix(rep(c(36L, 57L,  8L, 87L, 60L, 34L, 56L, 28L, 39L, 72L), 6), 10, 6, dimnames = list(sprintf("%s", seq(1:10)), c(LETTERS[1:6])))))
  
  dat <- reactive({
    tibble(group = factor(rep(LETTERS[1:6],10)), 
           card = factor(sort(rep(1:10, 6))),
           est_age = c(as.integer(input$mat)),
           true_age = c(rv$truthmat),
           error = c(as.integer(input$mat) - rv$truthmat))
  })
  
  output$data <- renderTable({
    dat() |> as.data.frame()
  }, rownames = FALSE, colnames = TRUE)
  
  output$variation <- renderTable({
    dat() |> 
      group_by(.data$group) |>
      summarise(mean_abs_err = mean(abs(.data$error))) |>
      as.data.frame()
  }, rownames = FALSE, colnames = TRUE)
  
  output$bias <- renderPlot({
    dat() |>
      ggplot() + 
      geom_boxplot(aes(y = .data$error, x = .data$card)) + 
      labs(title = "Bias in age estimates (error < 0 then 'look younger', error > 0 then 'look older')",
           y = "Error (est_age - true_age)",
           x = "Person (card)") +
      theme_classic(base_size = 18)
  })
}

# Create Shiny app ----
shinyApp(ui, server)
```

## Mathematics module highlights
### The Dundee Difference 

-  **Experiential learning** activities within modules (Botanics workshop, programming, report writing) and module choices (work placement and project modules).
- Focus on **process, context, and communicating outcome** - following best practices in mathematical modelling and statistics education.
- Inclusion of real data sets, considering context through the lens of **social justice**. 

## Thanks for listening! {.mySegue .center}

`r fa("hand-point-right")` &nbsp; Dr Eric Hall (ehall001@dundee.ac.uk)

`r fa("hand-point-right")` &nbsp; Dr Karen Meyer (kmeyer001@dundee.ac.uk)
